  Skip to content
    Search or jump toâ€¦
    Pull requests
    Issues
    Codespaces
    Marketplace
    Explore
    
    @Zakella
    Zakella
    /
    deploy-tests
    Public
    Cannot fork because you own this repository and are not a member of any organizations.
    Code
    Issues
    Pull requests
    Actions
    Projects
    Wiki
    Security
    Insights
    Settings
    Beta Try the new code view
    deploy-tests/.github/workflows/backend-cd.yml
    @Zakella
    Zakella test 58
    Latest commit a17b6a3 2 minutes ago
    History
    1 contributor
    115 lines (95 sloc)  2.93 KB


  name: CD - Deploy Backend

  on:
    workflow_dispatch:
    push:
      branches:
        - master

  jobs:
    deploy:
      runs-on: ubuntu-latest



      steps:
        - uses: actions/checkout@v3
            #      - uses: actions/setup-java@v3
            #        with:
            #          distribution: 'temurin'
            #          java-version: '17'
            #          cache: 'maven'

            #      - name: Login to Docker Hub
            #        uses: docker/login-action@v2
            #        with:
            #          username: ${{ secrets.DOCKERHUB_USERNAME }}
            #          password: ${{ secrets.DOCKERHUB_ACCESS_TOKEN }}
            #      - name: Set build number
            #        id: build-number
            #        run: echo "BUILD_NUMBER=$(date '+%d.%m.%Y.%H.%M.%S')" >> $GITHUB_OUTPUT

            #      - name: Build Package Push with Maven
            #        run: mvn -ntp -B verify -Ddocker.image.tag=${{steps.build-number.outputs.BUILD_NUMBER}} jib:build

            #      - name: Install SSH
          #        run: sudo apt-get install openssh-client

        #      - name: Initialize Git repository
        #        run:
        #          |
        #          cd /home/zakella/tests/deploytest
        #          git init
        #          git remote add origin https://github.com/Zakella/deploy-tests.git
        - name: Deploing application to server
          uses: appleboy/ssh-action@master
          with:
            host: ${{ secrets.HOST }}
            username: ${{ secrets.USERNAME }}
            key: ${{ secrets.SSH_PRIVATE_KEY }}
            script: |     
             cd tests
             rm -rf ./deploytest
             mkdir -p deploytest
             cd deploytest
             git init
             git clone https://github.com/Zakella/deploy-tests.git
             ll
             cd deploy-tests/
             docker compose pull
             docker compose down
             docker compose up -d
              
              
  
  
  

  #      - uses: alex-ac/github-action-ssh-docker-compose@master
  #        name: Docker-Compose Remote Deployment
  #        with:
  #          ssh_host: ${{ secrets.HOST }}
  #          ssh_private_key: ${{ secrets.SSH_PRIVATE_KEY }}
  #          ssh_user: ${{ secrets.USERNAME }}
  #          docker_compose_prefix: example_com



  #name: CD - Deploy Backend
  #
  #on:
  #  workflow_dispatch:
  #  push:
  #    branches:
  #      - master
  #
  #
  #jobs:
  #  deploy:
  #    runs-on: ubuntu-latest
  #
  #
  #    steps:
  #      - uses: actions/checkout@v3
  #      - uses: alex-ac/github-action-ssh-docker-compose@master
  #        name: Docker-Compose Remote Deployment
  #        with:
  #          ssh_host: ${{ secrets.HOST }}
  #          ssh_private_key: ${{ secrets.SSH_PRIVATE_KEY }}
  #          ssh_user: ${{ secrets.USERNAME }}
  #          docker_compose_prefix: example_com

  #      - name: Install SSH
  #        run: sudo apt-get install openssh-client
  #      - name: Deploy to VPS
  #        uses: appleboy/ssh-action@master
  #        with:
  #          host: ${{ secrets.HOST }}
  #          username: ${{ secrets.USERNAME }}
  #          key: ${{ secrets.SSH_PRIVATE_KEY }}
  #          script: |
  #            cd tests/deploytest/
  #            docker-compose pull
  #            docker-compose up -d


